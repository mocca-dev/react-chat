(this["webpackJsonpreact-chat"]=this["webpackJsonpreact-chat"]||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(12),o=n.n(c),i=(n(20),n(21),n(13)),s=n(8);n(22),n(27);const l=s.a.initializeApp({apiKey:"AIzaSyAabYeqpM9D1NGnRcDioq27iT6ZEcpPIsI",authDomain:"react-chat-c4e5b.firebaseapp.com",projectId:"react-chat-c4e5b",storageBucket:"react-chat-c4e5b.appspot.com",messagingSenderId:"554576645180",appId:"1:554576645180:web:58f68cbb152fa4da77c739"}),d=s.a.auth(),h=new s.a.auth.GoogleAuthProvider;s.a.firestore();var u=l,b=n(4);var j=e=>{let{auth:t}=e;return Object(b.jsx)("button",{className:"sign-in",onClick:()=>(e=>{e.signInWithPopup(h)})(t),children:"Sign In with Google"})};var p=e=>{let{auth:t}=e;return t?t.currentUser&&Object(b.jsx)("button",{className:"sign-out",onClick:()=>t.signOut(),children:"Sign Out"}):""},g=n(15);var v=e=>{let{message:t,userUid:n}=e;const{text:r,uid:a,photoURL:c}=t,o=a===n?"sent":"received";return Object(b.jsxs)("div",{className:"message ".concat(o),children:[Object(b.jsx)("img",{src:c||"https://api.adorable.io/avatars/23/abott@adorable.png",alt:""}),Object(b.jsx)("p",{children:r})]})};const f=s.a.firestore(u);var m=()=>{const e=Object(r.useRef)(),t=f.collection("messages"),n=t.orderBy("createdAt").limit(25),[a]=Object(g.a)(n,{idField:"id"}),[c,o]=Object(r.useState)("");Object(r.useEffect)((()=>{e.current.scrollIntoView({behavior:"smooth"})}),[]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("main",{children:[a&&a.map((e=>Object(b.jsx)(v,{message:e,userUid:d.currentUser.uid},e.id))),Object(b.jsx)("div",{ref:e})]}),Object(b.jsxs)("form",{onSubmit:async n=>{n.preventDefault();const{uid:r,photoURL:a}=d.currentUser;await t.add({text:c,createdAt:s.a.firestore.FieldValue.serverTimestamp(),uid:r,photoURL:a}),o(""),e.current.scrollIntoView({behavior:"smooth"})},children:[Object(b.jsx)("input",{type:"text",value:c,onChange:e=>o(e.target.value)}),Object(b.jsx)("button",{type:"submit",children:"Send"})]})]})};var w=function(){const[e]=Object(i.a)(d);return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsxs)("header",{className:"App-header",children:[Object(b.jsx)("h2",{children:"React Chat"}),Object(b.jsx)(p,{auth:d})]}),Object(b.jsx)("section",{children:e?Object(b.jsx)(m,{}):Object(b.jsx)(j,{auth:d})})]})};var O=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,28)).then((t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:c,getTTFB:o}=t;n(e),r(e),a(e),c(e),o(e)}))};const x=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}o.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root")),O(),function(e){if("serviceWorker"in navigator){if(new URL("/react-chat",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="".concat("/react-chat","/service-worker.js");x?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((n=>{const r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):k(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):k(t,e)}))}}()}},[[26,1,2]]]);
//# sourceMappingURL=main.e4ceabf9.chunk.js.map